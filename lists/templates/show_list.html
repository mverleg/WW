
{% extends 'frame.html' %}


{% block title %}
	{{ list.name }}
	-
	{{ block.super }}
{% endblock title %}

{% block menu_autofocus %}{% endblock menu_autofocus %}

{% block content %}

	<h1>{{ list.name }}</h1>

	{% if list.language %}
	    <p>This list is for learning <strong>{{ list.language_disp }}</strong>.</p>
	{% else %}
		<p>This is a mixed-language list, phrases of multiple languages may appear.</p>
	{% endif %}

	{% if items.paginator.count %}
        <table class="table table-striped table-hover table-condensed">
            <thead>
                {% if not list.language %}
                    <td>Language</td>
                {% endif %}
                <td style="min-width: 50%;">Text</td>
                <td>Translations</td>
                {% if access.editable %}
                    <td>Action</td>
                {% endif %}
            </thead>
            <tbody>
                {% for translation in items %}
                    <tr {% if list.language %}{% if not list.language == translation.language %}class="danger"{% endif %}{% endif %}>
                        {% if not list.language %}
                            <td>
                                {{ translation.language_disp }}
                            </td>
                        {% endif %}
                        <td>
                            {{ translation.text }}
                            {% if list.language %}
                                {% if not list.language == translation.language %}
                                    [{{ translation.language_disp }}]
                                {% endif %}
                            {% endif %}
                        </td>
                        <td><a href="{% url 'show_phrase' pk=translation.phrase.pk %}">{{ translation.other_languages }} other{{ translation.other_languages|pluralize }}</a></td>
                        {% if access.editable %}
                            <td>
                                <form class="form form-inline" method="POST" action="{% url 'remove_translation' %}">
                                    <input type="hidden" name="pk" value="{{ list.pk }}" />
                                    <input type="hidden" name="trans_pk" value="{{ translation.pk }}" />
                                    <input type="hidden" name="next" value="{{ request.get_full_path }}" />
                                    {% csrf_token %}
                                    <button type="submit" class="btn btn-xs btn-danger" title="Click to add this list to your followed lists collection."><i class="glyphicon glyphicon-trash"></i></button>
                                </form>
                            </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
		<nav class="text-center">
			<ul class="pagination pagination-centered">
				<li {% if not items.has_previous %}class="disabled"{% endif %}>
					<a href="{% if items.has_previous %}?page={{ items.previous_page_number }}{% endif %}" aria-label="Previous">
						<span aria-hidden="true">&laquo;</span>
					</a>
				</li>
				{% for pagenr in nearby_pages %}
					{% if pagenr %}
						<li {% if items.number == pagenr %}class="active"{% endif %}><a href="?page={{ pagenr }}">{{ pagenr }}</a></li>
					{% else %}
						<li class="disabled"><a href="#">...</a></li>
					{% endif %}
				{% endfor %}
				<li {% if not items.has_next %}class="disabled"{% endif %}>
					<a href="{% if items.has_next %}?page={{ items.next_page_number }}{% endif %}" aria-label="Next">
						<span aria-hidden="true">&raquo;</span>
					</a>
				</li>
			</ul>
		</nav>
	{% else %}
		<p>There are no phrases in this list.</p>
	{% endif %}

	{% if access.editable %}
        <div>
            <p>You can add translations to the list.</p>
	        <form class="form form-inline" role="search" method="POST" action="{% url 'insert_translation_search' %}">
	       		<div class="form-group">
	       			<input style="width: 700px; max-width: 100%;" name="q" type="text" class="form-control" placeholder="{% blocktrans context 'Search placeholder' %}search{% endblocktrans %}..." autofocus>
	       		</div>
		        <input type="hidden" name="pk" value="{{ list.pk }}" />
                <input type="hidden" name="next" value="{{ request.get_full_path }}" />
	            {% csrf_token %}
	       		<button type="submit" class="btn btn-default" title="Add the phrase to this list."><i class="glyphicon glyphicon-plus"></i></button>
	       	</form>
        </div>
	{% endif %}
    <br />

	{% if access.editable %}
		<a href="{% url 'edit_list' pk=list.pk slug=list.slug %}" class="btn btn-primary">Edit this list</a>

        <form style="display: inline;" role="form" action="{% url 'delete_list' %}" method="POST">
            <input type="hidden" name="pk" value="{{ list.pk }}" />
            <input type="hidden" name="next" value="{{ request.get_full_path }}" />
            {% csrf_token %}
            <button type="submit" class="btn btn-danger">Delete this list</button>
        </form>
	{% endif %}

{% endblock content %}


